drop table insurer if exists;
drop table occupation if exists;
drop table post_code if exists;
drop table insurer_occupation if exists;
drop table insurer_postcode if exists;

create table insurer (insurer_id bigint generated by default as identity, min_turnover bigint, insurer_name varchar(255), insurer_website varchar(255), primary key (insurer_id));
create table occupation (id bigint generated by default as identity, occupation varchar(255), primary key (id));
create table post_code (postcode_id bigint generated by default as identity, postcode varchar(255), primary key (postcode_id));

create table insurer_occupation (insurer_id bigint not null, occupation_id bigint not null, primary key (insurer_id, occupation_id));
create table insurer_postcode (insurer_id bigint not null, postcode_id bigint not null, primary key (insurer_id, postcode_id));

alter table occupation add constraint UK_occ unique(occupation);
alter table post_code add constraint UK_postCode unique(postcode);
alter table insurer_occupation add constraint FK_io_o foreign key (occupation_id) references occupation;
alter table insurer_occupation add constraint FK_io_i foreign key (insurer_id) references insurer;
alter table insurer_postcode add constraint FK_ip_p foreign key (postcode_id) references post_code;
alter table insurer_postcode add constraint FK_ip_i foreign key (insurer_id) references insurer;

insert into occupation (id, occupation) values(1,'COBBLER');
insert into occupation (id, occupation) values(2,'BARBER');
insert into occupation (id, occupation) values(3,'BUTCHER');
insert into occupation (id, occupation) values(4,'BUTLER');
insert into occupation (id, occupation) values(5,'CARPENTER');
insert into occupation (id, occupation) values(6,'SWEEPER');

insert into post_code(postcode_id, postcode) values(1,'2118');
insert into post_code (postcode_id, postcode) values(2,'2009');
insert into post_code (postcode_id, postcode) values(3,'2113');
insert into post_code (postcode_id, postcode) values(4,'2103');
insert into post_code (postcode_id, postcode) values(5,'2290');
insert into post_code (postcode_id, postcode) values(6,'2006');

insert into insurer (insurer_id, min_turnover, insurer_name, insurer_website) values(1,116000,'InsurerAB','www.insurerAB.com');
insert into insurer_postcode (insurer_id, postcode_id) values(1,1);
insert into insurer_postcode (insurer_id, postcode_id) values(1,2);
insert into insurer_occupation (insurer_id, occupation_id) values(1,1);
insert into insurer_occupation (insurer_id, occupation_id) values(1,3);

insert into insurer (insurer_id, min_turnover, insurer_name, insurer_website) values(2,196000,'InsurerBC','www.insurerBC.com');
insert into insurer_postcode (insurer_id, postcode_id) values(2,1);
insert into insurer_occupation (insurer_id, occupation_id) values(2,5);

insert into insurer (insurer_id, min_turnover, insurer_name, insurer_website) values(3,156000,'InsurerCD','www.insurerCD.com');
insert into insurer_postcode (insurer_id, postcode_id) values(3,2);
insert into insurer_postcode (insurer_id, postcode_id) values(3,4);
insert into insurer_occupation (insurer_id, occupation_id) values(3,3);

insert into insurer (insurer_id, min_turnover, insurer_name, insurer_website) values(4,136000,'InsurerDE','www.insurerDE.com');
insert into insurer_postcode (insurer_id, postcode_id) values(4,4);
insert into insurer_occupation (insurer_id, occupation_id) values(4,5);
insert into insurer_occupation (insurer_id, occupation_id) values(4,2);
